<html>
<head>
  <title>Evernote Export</title>
  <basefont face="Segoe UI" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/308919 (en-US, MWS); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: Segoe UI;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="4706"/>

<div>
<span><div><div><span style="font-size: 14pt; font-weight: bold;">Basic Description</span></div><div><br/></div><div><span style="font-size: 10pt; font-weight: bold;">Folders</span></div><ul><li><div>&quot;ProjectsFiles&quot; folder contain ImageJ macro and Cellprofiler project</div></li><li><div>Result folder contain processed results</div></li><ul><li><div>Measurements folder contain csv files</div></li><li><div>Images folder contain threshold image of DAPI and STAT1 channel</div></li></ul></ul><div><br/></div><div><span style="font-weight: bold;">BatchChannelSplitter.ijm</span></div><div>This ImageJ macro will read original image and identify DAPI and STAT1 channel from metadata.</div><div>Save each image as tif into user specified destination folder</div><div>It also perform background subtraction</div><div><br/></div><div><b>DAPI_IN_OUT_RATIO_RobustBackground.cpproj</b></div><div>This Cellprofiler project will identify DAPI region and STAT1 region in 3D. Then measure total and mean intensity of STAT1 channel inside and outside of DAPI region.<br/></div><div>It output image intensity measurements into csv file.<br/></div><ul><li><div>STAT1_Images.csv - all STAT1 intensity measurement has been background subtracted</div></li><ul><li><div>Image Number : Image number assigned by Cellprofiler</div></li><li><div>Math_STAT1_Mean : Mean intensity of entire STAT1 channel inside of threshold region</div></li><li><div>Math_STAT1_MeanDAPI : Mean intensity of STAT1 channel inside of DAPI region - masked with STAT1 and DAPI threshold image</div></li><li><div>Math_STAT1_MeanNonDAPI : Mean intensity of STAT1 channel outside of DAPI region - maskek with STAT1 and inverse of DAPI threshold image</div></li><li><div>Math_STAT1_MeanRatio : Ratio of Math_STAT1_MeanDAPI over Math_STAT1_MeanNonDAPI</div></li><li><div>Math_STAT1_Total : Totalintensity of entire STAT1 channel inside of threshold region</div></li><li><div>Math_STAT1_TotalDAPI : Totalintensity of STAT1 channel inside of DAPI region - masked with STAT1 and DAPI threshold image</div></li><li><div>Math_STAT1_TotalNonDAPI : Totalintensity of STAT1 channel outside of DAPI region - maskek with STAT1 and inverse of DAPI threshold image</div></li><li><div>Math_STAT1_TotalRatio : Ratio of Math_STAT1_TotalDAPI over Math_STAT1_TotalNonDAPI</div></li></ul></ul><div><br/></div><hr/><div><span style="font-size: 14pt; font-weight: bold;">How to Use it</span></div><div><br/></div><div><span style="font-weight: bold;">Run BatchChannelSplitter.ijm ImageJ Macro</span></div><ol><li><div>Open macro in ImageJ - use Fiji</div></li><li><div>Run Macro</div></li><li><div>Select Source Directory where image files located</div></li><ul><li><div>Image file can be in subfolders</div></li></ul><li><div>Select Destination Directory where splitted image will be saved</div></li><li><div>Dialogbox will ask following options</div></li><ul><li><div>Option to process subfolders under Source folder to find images</div></li><ul><li><div>If you have subfolders, check this option</div></li></ul><li><div>Option to create same subfolder structure in destination folder</div></li><ul><li><div>Strongly recommned not to use this option</div></li></ul></ul><li><div>Push OK and wait finishing processing</div></li><li><div>Destination folder should have Filename_DAPI.tif and Filename_STAT1.tif</div></li></ol><div><br/></div><div><span style="font-weight: bold;">Run </span><span style="font-weight: bold;">DAPI_IN_OUT_RATIO_RobustBackground.cpproj</span> <span style="font-weight: bold;">Cellprofiler Project</span></div><ol><li><div>Open project in Cellprofiler - require Cellprofiler version 3.0<br/></div></li><li><div>Set Default output folder</div></li><ul><li><div>Push &quot;View output settings&quot; button at the bottom left area</div></li><li><div>Specify &quot;Default Output Folder&quot; to the folder you want to save result.</div></li></ul><li><div>Select &quot;Images&quot; module - top of the module list and add image files</div></li><ul><li><div>Drag and Drop image files and confirm image list show up</div></li><li><div>Drop both _DAPI and _STAT1 images</div></li><li><div>You can use top folder of image</div></li></ul><li><div>Select &quot;Metadata&quot; module and update metadata</div></li><ul><li><div>Push &quot;Update&quot; button and confirm metadata are displayed</div></li></ul><li><div>Select &quot;NamesAndTypes&quot; module and update settings</div></li><ul><li><div>Pus &quot;Update&quot; button and confirm processing images are displayed</div></li><li><div>DAPI column has DAPI file name and STAT1 column has STAT1 file name</div></li></ul><li><div>Run project by pressing &quot;Analyze Images&quot; at the left bottom area</div></li><li><div>Wait for finishing processing</div></li><ul><li><div>Images folder will be created and contain threshold of DAPI and STAT1 images</div></li><li><div>Measurements folder will be created and contain STAT1_Images.csv</div></li></ul></ol><div><br/></div><hr/><div><span style="font-size: 14pt; font-weight: bold;">Technical Description</span></div><div><br/></div><div><span style="font-weight: bold;">BatchChannelSplitter.ijm ImageJ Macro</span></div><div>Since original image channel assignment order is random, it require to read image meta data to figure out which channel contain DAPI and STAT1 channel.</div><div>Luckily Name #2, Name #3, Name #4 contain channel information &quot;405&quot;, &quot;561&quot;, &quot;640&quot; to identify excitation of the channel.</div><div>This macro read these metadata and identify DAPI and STAT1 channel. Then save these two images to specified destination folder.</div><div><br/></div><div><span style="font-weight: bold;">IntensityMeasurements.cpproj Cellprofiler Project</span></div><ul><li><div>All processing is in 3D</div></li><li><div>Nucleus region will be identified by using threshold DAPI channel</div></li><ul><li><div>Use Minimum cross entropy method to automatically determine threshold</div></li><ul><li><div>Threshold smoothing scale : 4</div></li></ul><li><div>Save threshold image into &quot;images&quot; folder under default output folder</div></li></ul><li><div>STAT1 region will be identified by using threshold STAT1 channel</div></li><ul><li><div>Use Robust Background Method to determine threshold</div></li><ul><li><div>Threshold smoothing scale : 4</div></li></ul><li><div>Save threshold image into &quot;images&quot; folder under default output folder</div></li></ul><li><div>Mask Images for image intensity measurements</div></li><ul><ul><li><div>Entire STAT1 Region : Mask STAT1 image with threshold STAT1 image for STAT1 region measurements</div></li><li><div>STAT1 inside DAPI : Mask STAT1 region image created above with DAPI threshold image</div></li><li><div>STAT1 outsside DAPI : Mask STAT1 region image created above with inverse of DAPI threshold image</div></li></ul></ul><li><div>Measure intensity of masked images</div></li><ul><li><div>Use Total and Mean intensity</div></li><li><div>STAT1, STAT1 in DAPI, STAT1 ouside DAPI  </div></li></ul><li><div>Calibrate measured intensity into original image intensity</div></li><ul><li><div>Multiply 65535</div></li><li><div>STAT1 total and Mean intensity</div></li><li><div>STAT1 in DAPI total and Mean intensity</div></li><li><div>STAT1 outside DAPI total and mean intensity</div></li></ul><li><div>Calculate ratio values</div></li><ul><li><div>Ratio of Total STAT1 in DAPI over Total STAT1 ouside DAPI</div></li><li><div>Ratio of Mean STAT1 in DAPI over Mean STAT1 ouside DAPI</div></li></ul><li><div>Save calibrated values and calculated ratio into csv file.</div></li></ul><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></div></span>
</div></body></html> 